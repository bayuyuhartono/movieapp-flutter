# default_platform(:android)

# platform :android do
#   desc "Build APK for internal testing"
#   lane :internal do
#     sh("flutter build appbundle --release")

#     upload_to_play_store(
#       json_key: "android/fastlane/google_play_key.json",
#       version_name: "MovieAddict",
#       package_name: "com.bayuyuhartono.movieaddict",
#       aab: "build/app/outputs/bundle/release/app-release.aab",
#       track: "internal",
#       skip_upload_metadata: true,
#       skip_upload_images: true,
#       skip_upload_screenshots: true,
#       release_status: 'draft'
#     )
#   end
# end


# fastlane/Fastfile

platform :android do
  desc "Deploy a new version to the Google Play Internal track"
  lane :internal do
    gradle(
      task: 'bundleRelease'
    )

    upload_to_play_store(
      track: 'internal',
      version_name: "MovieAddict",
      json_key: "android/fastlane/google_play_key.json",
      aab: "build/app/outputs/bundle/release/app-release.aab",
      package_name: "com.bayuyuhartono.movieaddict",
      release_status: 'draft',
      skip_upload_metadata: true,
      skip_upload_images: true,
      skip_upload_screenshots: true,
    )
  end
end